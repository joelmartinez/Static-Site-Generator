<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf8" />
	<title>Reusing PHPBB&#x27;s Authentication System</title>
  <meta name="author" content="Joel Martinez" />
  <meta name="nlweb:ai-access" content="allow" />
  <link rel="alternate" type="application/rss+xml" title="Reusing PHPBB&#x27;s Authentication System" href="//codecube.net/feed/" />
  <link rel="nlweb-manifest" href="/nlweb.json" />
	<link rel="stylesheet" type="text/css" href="/design/style.css?v=2" />
      <meta name="title" content="Reusing PHPBB&#x27;s Authentication System" />
      <meta name="description" content="Question:&#xA;&#xA;What&#x27;s the easiest way to let a custom application re-use accounts from a PHPBB installation?&#xA;&#xA;Answer:&#xA;&#xA;The first thing that occurred to me was that I&#x27;d have to look over the PHPBB user ..." />
      <meta name="twitter:card" content="summary" />
      <meta name="twitter:site" content="@joelmartinez" />
      <meta name="twitter:creator" content="@joelmartinez" />
      <meta name="twitter:title" content="Reusing PHPBB&#x27;s Authentication System" />
      <meta name="twitter:description" content="Question:&#xA;&#xA;What&#x27;s the easiest way to let a custom application re-use accounts from a PHPBB installation?&#xA;&#xA;Answer:&#xA;&#xA;The first thing that occurred to me was that I&#x27;d have to look over the PHPBB user ..." />
      <meta property="og:type" content="article" />
      <meta property="og:title" content="Reusing PHPBB&#x27;s Authentication System" />
      <meta property="og:description" content="Question:&#xA;&#xA;What&#x27;s the easiest way to let a custom application re-use accounts from a PHPBB installation?&#xA;&#xA;Answer:&#xA;&#xA;The first thing that occurred to me was that I&#x27;d have to look over the PHPBB user ..." />
  
  <script src="/script/tone.js"></script>
</head>
<body>
  <div id="header">
    <div>
	  <a href="/" rel="home"><img height="50" width="50" src="//www.gravatar.com/avatar/a61a4be80ce39683142620a76299820b.png" title="ItsAMeee" /></a>
      <a href="/about/" rel="author">Joel Martinez</a>
      <a href="/resume/">Resume</a>

      <img id="flair" src="/design/images/flair.png" />
    </div>
  </div>

  <div id="contentwrapper">
	  <div id="content">
		<article class="hentry" itemscope itemtype="https://schema.org/Article">
  <h1 class="entry-title" itemprop="headline">Reusing PHPBB&#x27;s Authentication System</h1>
  <p id="author">By <a href="http://codecube.net" title="More posts by Joel Martinez" rel="author" itemprop="author" itemscope itemtype="https://schema.org/Person"><span itemprop="name">Joel Martinez</span></a> on <time class="published" itemprop="datePublished" datetime="2010-02-22">02/22/2010</time>
</p>
  <div class="entry-content" itemprop="articleBody">
    Question:<br /><br />What's the easiest way to let a custom application re-use accounts from a PHPBB installation?<br /><br />Answer:<br /><br />The first thing that occurred to me was that I'd have to look over the PHPBB user tables, connect to mysql, and read the user's password (which I assume is hashed) to do the authentication. The second idea I had was to write a proxy service in PHP that I could call from my custom app.<br /><br />Both of those options seemed like an awful pain in the butt. Then I had an epiphany, if you take a look at the ideals behind REST services, one could reason that PHPBB already exposes a REST service for logging in.<br /><br />What if I simply used the already exposed HTML form as a sort of pseudo web service?<br /><br />Making HTTP posts with C# is pretty easy, but I didn't want to try to remember what the syntax was for the API; So I did a quick search online and found a nice little class that makes it really easy:
<a href="http://geekswithblogs.net/rakker/archive/2006/04/21/76044.aspx">http://geekswithblogs.net/rakker/archive/2006/04/21/76044.aspx</a><br /><br />With this class in hand, I used <a href="http://getfirebug.com/">FireBug</a> while logging in to the PHPBB and inspected the post variables. Easy, there were only four variables posted:
<ul>
	<li>autologin=on</li>
	<li>login=Login</li>
	<li>username=<em>[My Username]</em></li>
	<li>password=<em>[My Password]</em></li>
</ul>
I grabbed the URL it was posting to and added the variables (see the example below). Once I get the result back, a simple regular expression parses through the HTML and figures out if the login was successful or not. The result worked surprisingly well ... the method below takes a username, password, and url. The URL will look something like this:
http://mywebsite.com/forum/ucp.php?mode=login&amp;sid=9cd8b8da2649060b9d22d297f27a1dc7
<blockquote>
<pre>private static bool Authenticate(string username, string password, string url)
{
    PostSubmitter post = new PostSubmitter();
    post.Url = url;<br /><br />    post.PostItems.Add("autologin", "on");
    post.PostItems.Add("login", "Login");
    post.PostItems.Add("username", username);
    post.PostItems.Add("password", password);
    post.Type = PostSubmitter.PostTypeEnum.Post;
    string result = post.Post();<br /><br />    string loggedinstring = string.Format("Logout \\[ {0} \\]", username);
    Regex r = new Regex(loggedinstring, RegexOptions.IgnoreCase);
    var match = r.Match(result);<br /><br />    return match.Success;
}</pre>
</blockquote>
<em>Disclaimer:</em> I've only tried this code with one instance of phpbb, not sure if it will work with other versions. The point of this was that we can trivially reuse existing user stores that are already exposed on the web via simple html forms.
  </div>
</article>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "Reusing PHPBB&#x27;s Authentication System",
  "description": "Question:  What&#x27;s the easiest way to let a custom application re-use accounts from a PHPBB installation?  Answer:  The first thing that occurred to me was that I&#x27;d have to look over the PHPBB user ...",
  "author": {
    "@type": "Person",
    "name": "Joel Martinez",
    "url": "https://codecube.net/about/"
  },
  "publisher": {
    "@type": "Person",
    "name": "Joel Martinez",
    "url": "https://codecube.net"
  },
  "datePublished": "2010-02-22",
  "dateModified": "2010-02-22",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://codecube.net/2010/02/reusing-phpbbs-authentication-system/"
  }
}
</script>
<p>See more in the <a href="/#archives">archives</a>
</p>

	  </div>
  </div>

  <div id="footer">
    copyright 2013 - 2025 - <a rel="me" href="https://mastodon.social/@joelmartinez">me @ Mastodon</a> and <a rel="me" href="https://www.threads.net/@joeldm1971">Threads</a>
  </div>

  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WV9DDDSFMW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WV9DDDSFMW');
</script>
</body>
</html>
