<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>MVC Pattern with Javascript</title>
  <meta name="author" content="Joel Martinez" />
  <meta name="nlweb:ai-access" content="allow" />
  <link rel="icon" type="image/svg+xml" href="/design/images/codecube-logo-web.svg" />
  <link rel="alternate" type="application/rss+xml" title="MVC Pattern with Javascript" href="//codecube.net/feed/" />
  <link rel="nlweb-manifest" href="/nlweb.json" />
	<link rel="stylesheet" type="text/css" href="/design/style2.css" />
      <meta name="title" content="MVC Pattern with Javascript" />
      <meta name="description" content="We&#x2019;ve been pushing pretty hard at work recently to become masters of the javascript language.&amp;#160; Since we use it so extensively, and recent browser improvements such as compilation to native cod..." />
      <link rel="canonical" href="http://codecube.net/2009/06/mvc-pattern-with-javascript/" />
      <meta name="twitter:card" content="summary" />
      <meta name="twitter:site" content="@joelmartinez" />
      <meta name="twitter:creator" content="@joelmartinez" />
      <meta name="twitter:title" content="MVC Pattern with Javascript" />
      <meta name="twitter:description" content="We&#x2019;ve been pushing pretty hard at work recently to become masters of the javascript language.&amp;#160; Since we use it so extensively, and recent browser improvements such as compilation to native cod..." />
      <meta property="og:type" content="article" />
      <meta property="og:title" content="MVC Pattern with Javascript" />
      <meta property="og:description" content="We&#x2019;ve been pushing pretty hard at work recently to become masters of the javascript language.&amp;#160; Since we use it so extensively, and recent browser improvements such as compilation to native cod..." />
  
  <script src="/script/tone.js"></script>
</head>
<body>
  <header>
    <div class="branding">
      <a href="/" style="text-decoration: none; display: flex; align-items: center; gap: 1rem;">
        <img
          src="/design/images/codecube-logo-web.svg"
          alt="CodeCube Ventures logo"
          height="48"
          id="site-logo"
        />
        <div class="site-title">
          <span class="title-main">CODECUBE</span>
          <span class="title-sub">VENTURES</span>
        </div>
      </a>
    </div>
    <nav>
      <ul class="nav-list">
        <li><a href="/resume/">Resume</a></li>
        <li><a href="/about/">About</a></li>
      </ul>
    </nav>
  </header>

  <main>
	  <article class="hentry" itemscope itemtype="https://schema.org/Article">
  <h1 class="entry-title" itemprop="headline">MVC Pattern with Javascript</h1>
  <p id="author">By <a href="http://codecube.net" title="More posts by Joel Martinez" rel="author" itemprop="author" itemscope itemtype="https://schema.org/Person"><span itemprop="name">Joel Martinez</span></a> on <time class="published" itemprop="datePublished" datetime="2009-06-03">06/03/2009</time>
</p>
  <div class="entry-content" itemprop="articleBody">
    <p>We’ve been pushing pretty hard at work recently to become masters of the javascript language.&#160; Since we use it so extensively, and recent browser improvements such as compilation to native code of javascript … it means that it’s certainly not going away.&#160; On the server-side, we use ASP.NET MVC and have come to be quite fond of the pattern. I wanted to explore what it would look like to use the MVC pattern in javscript so that we can use it some of our more complex pages.</p>  <p>The first thing I did was poke around on the web to see if there were any existing frameworks I could simply use.&#160; I found a few such as:</p>  <ul>   <li><a href="http://javascriptmvc.com/">http://javascriptmvc.com/</a></li>    <li><a href="http://activerecordjs.org/">http://activerecordjs.org/</a></li>    <li><a href="http://jamal-mvc.com/">http://jamal-mvc.com/</a></li> </ul>  <p>Most of what I saw was either a bit too heavyweight for my tastes, or had the wrong focus, such as moving databinding from the server to the client.&#160; So I decided to try my hand at implementing it for myself.&#160; </p>  <p>The sample app/page that I implemented was a super simple list application that lets you type in some text, which gets sent to the server in an ajax call.&#160; The status of the operations would be collected in a list on the page.&#160; Although this is a fairly simplistic example, it has enough moving parts to show off the pattern.</p>  <h2>The Dependencies</h2>  <p><a href="http://jquery.com/">jQuery</a>, my favorite uber framework of choice.</p>  <p>I tried to make this as simple of an example as possible. However, I recently purchased the book “<em><a href="http://jsdesignpatterns.com/">Pro JavaScript Design Patterns</a>”</em>, and there was a pattern in there that I really liked and wanted to use.&#160; This pattern is the observer pattern.&#160; I didn’t take the full code provided in the book, just what I needed.</p>  <blockquote>   <p>//-- publisher class --     <br />function Publisher() {      <br />&#160;&#160;&#160; this.subscribers = [];      <br />}; </p>    <p>Publisher.prototype.deliver = function(data) {     <br />&#160;&#160;&#160; this.subscribers.forEach(function(fn) { fn(data); });      <br />}; </p>    <p>//-- subscribe method to all existing objects     <br />Function.prototype.subscribe = function(publisher) {      <br />&#160;&#160;&#160; var that = this;      <br />&#160;&#160;&#160; var alreadyExists = publisher.subscribers.some(function(el) {      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; if (el === that) {      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; return;      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; }      <br />&#160;&#160;&#160; }); </p>    <p>&#160;&#160;&#160; if (!alreadyExists) {     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; publisher.subscribers.push(this);      <br />&#160;&#160;&#160; }      <br />&#160;&#160;&#160; return this;       <br />};</p> </blockquote>  <p>I used this so that the model can essentially raise events that the controller can listen to.</p>  <h2>The View</h2>  <p>Getting started, the first thing I implemented was the view.&#160; I started with a few very simple html elements.</p>  <blockquote>   <p>&lt;input type=&quot;text&quot; id=&quot;name&quot; /&gt;     <br />&lt;input type=&quot;button&quot; value=&quot;add&quot; id=&quot;addButton&quot; /&gt;      <br />&lt;ul id=&quot;list&quot;&gt;      <br />&lt;/ul&gt;</p> </blockquote>  <p> Then I implemented the view.&#160; Note that I’m using the literal object notation instead of the classic object oriented syntax to declare these classes.&#160; I did this because I only need one instance of these classes.</p>  <blockquote>   <p>var view = { </p>    <p>&#160;&#160;&#160; init: function() {     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; this.name = $(&quot;#name&quot;);      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; this.addButton = $(&quot;#addButton&quot;);      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; this.list = $(&quot;#list&quot;); </p>    <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160; this.addButton.click(function() {     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; controller.addItem(view.name.val());      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; });      <br />&#160;&#160;&#160; }, </p>    <p>&#160;&#160;&#160; appendItemToList: function(item) {     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; this.list.append($(&quot;&lt;li&gt;&quot;).text(item));      <br />&#160;&#160;&#160; }      <br />};</p> </blockquote>  <p>The init function uses jquery to pull references to the UI elements and also to set event handlers.&#160; It also exposes the “appendItemToList” function, which concerns itself with taking a line of text and adding it to the list.</p>  <h2>The Model</h2>  <p>Next, I wrote the model, which would be responsible for communicating with the server in this case.&#160; All of the issues surrounding server communication would be handled in this class (ie. ajax calls, callbacks, etc.).&#160; </p>  <blockquote>   <p>var model = { </p>    <p>&#160;&#160;&#160; itemAddedEvent: new Publisher(), </p>    <p>&#160;&#160;&#160; submitNewItem: function(item) {     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; $.getJSON(&quot;/home/addnewitem/&quot; + escape(item), null, this.submitNewItemCallback);      <br />&#160;&#160;&#160; }, </p>    <p>&#160;&#160;&#160; submitNewItemCallback: function(data) {     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; model.itemAddedEvent.deliver(data.result);      <br />&#160;&#160;&#160; }      <br />};</p> </blockquote>  <p>Note also that there is an itemAddedEvent which uses the Publisher class defined above.&#160; This is used so that the model can notify the controller once the ajax call has returned.</p>  <h2>The Controller</h2>  <p>Finally, the controller … which can contain all of the business logic for the page without having to be muddied up with any knowledge of the page’s html structure, or any knowledge of how to communicate with the server.</p>  <blockquote>   <p>var controller = { </p>    <p>&#160;&#160;&#160; addItem: function(item) {     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; var valueToDisplay = 'entered: ' + item;      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; view.appendItemToList(valueToDisplay);      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; model.submitNewItem(item);      <br />&#160;&#160;&#160; }, </p>    <p>&#160;&#160;&#160; serverItemAdded: function(item) {     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; view.appendItemToList(item);      <br />&#160;&#160;&#160; }, </p>    <p>&#160;&#160;&#160; init: function() {     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; this.serverItemAdded.subscribe(model.itemAddedEvent);      <br />&#160;&#160;&#160; }      <br />};</p> </blockquote>  <p>The server-side action method is defined as such using ASP.NET MVC:</p>  <blockquote>   <p>public ActionResult AddNewItem(string id)     <br />{      <br />&#160;&#160;&#160; return Json(new      <br />&#160;&#160;&#160; {      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; result = string.Format(&quot;'{0}' was added by the server&quot;, id)      <br />&#160;&#160;&#160; });      <br />}</p> </blockquote>  <h2>Putting it all together</h2>  <p>The last bit is simply some glue code that lets the view and controller initialize themselves.</p>  <blockquote>   <p>$(document).ready(function() {     <br />&#160;&#160;&#160; view.init();      <br />&#160;&#160;&#160; controller.init();      <br />});</p> </blockquote>  <p>As you can see, with just a few very simple techniques, the code ends up very clean and easy to maintain.&#160; Although for smaller/simple forms even this would probably end up being way too much complexity … some of the more complex forms will certainly benefit from the added separation of concerns.</p>  <p>I would love to get feedback on pros/cons of this approach.&#160; Any alternative ideas would greatly be appreciated :-)</p>
  </div>
</article>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "MVC Pattern with Javascript",
  "description": "We&#x2019;ve been pushing pretty hard at work recently to become masters of the javascript language.&amp;#160; Since we use it so extensively, and recent browser improvements such as compilation to native cod...",
  "author": {
    "@type": "Person",
    "name": "Joel Martinez",
    "url": "https://codecube.net/about/"
  },
  "publisher": {
    "@type": "Person",
    "name": "Joel Martinez",
    "url": "https://codecube.net"
  },
  "datePublished": "2009-06-03",
  "dateModified": "2009-06-03",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://codecube.net/2009/06/mvc-pattern-with-javascript/"
  }
}
</script>

<p><strong>Latest post:</strong> <a href="/2025/7/team-series-size/"> When Your Team Gets Bigger - How Teams Grow</a></p>

<p>See more in the <a href="/#archives">archives</a>
</p>

  </main>

  <footer>
    copyright 2013 - 2025 - <a rel="me" href="https://mastodon.social/@joelmartinez">me @ Mastodon</a> and <a rel="me" href="https://www.threads.net/@joeldm1971">Threads</a>
  </footer>

  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WV9DDDSFMW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WV9DDDSFMW');
</script>
</body>
</html>
